(()=>{"use strict";const e=new Audio("../vendor/panelSheildOn.wav"),t=new Audio("../vendor/panelSheildOff.wav"),r=new Audio("../vendor/taskComplete.wav"),s=document.querySelector(".content"),i=new class{constructor(e,t,r){this.CELLS_IN_ROW=e,this.GRID_GAP_PIXELS=t,this.PADDING_OF_MAIN_BLOCK_VW=r,this.PROGRESS_BAR_WIDTH="0%",this.randomArr=[],this.GRID_GAP_QUANITY=this.CELLS_IN_ROW-1,this.COMMON_GRID_GAP_PX=this.GRID_GAP_QUANITY*this.GRID_GAP_PIXELS,this.PROP_OF_GRID=`repeat(${this.CELLS_IN_ROW}, calc((${100-2*this.PADDING_OF_MAIN_BLOCK_VW}vw - ${this.COMMON_GRID_GAP_PX}px)/${this.CELLS_IN_ROW})`,this.mainBlock,this.block,this.progressBarInner,this.cellsArr=[],this.counter=1,this.counterOfTasks=1}createRandomArr(){this.randomArr=[];for(let e=1;e<=Math.pow(this.CELLS_IN_ROW,2);e++)this.randomArr.push(e);this.randomArr.sort((()=>Math.random()-.5))}createBlock(){const e=document.createElement("div");e.classList.add("patience");const t=document.createElement("div");t.classList.add("patience__table"),t.style.setProperty("--grid-gap-px",`${this.GRID_GAP_PIXELS}px`),t.style.setProperty("--prop-of-grid",this.PROP_OF_GRID),t.style.setProperty("--cells-in-row",this.CELLS_IN_ROW);const r=document.createElement("div");r.classList.add("patience__progress-bar");const s=document.createElement("div");s.classList.add("patience__progress-bar-inner"),r.appendChild(s),s.style.setProperty("--progress-bar-width",this.PROGRESS_BAR_WIDTH),e.appendChild(t),e.appendChild(r),this.block=t,this.mainBlock=e,this.progressBarInner=s}createCellsArr(){this.cellsArr=[];for(let e of this.randomArr){let t=document.createElement("div");t.classList.add("patience__cell"),t.textContent=e,this.cellsArr.push(t)}}renderBlockInContainer(e,t){t.insertAdjacentElement("afterbegin",e)}increaseCounter(){this.counter++}resetCounter(){this.counter=1}cleanCells(){this.block.innerHTML=""}preservingThePast(){for(let e=1;e<this.counter;e++)this.cellsArr.find((t=>t.textContent==e)).classList.add("patience__cell_active")}increaseCellsInRow(){this.CELLS_IN_ROW++}refreshState(){this.GRID_GAP_QUANITY=this.CELLS_IN_ROW-1,this.COMMON_GRID_GAP_PX=this.GRID_GAP_QUANITY*this.GRID_GAP_PIXELS,this.PROP_OF_GRID=`repeat(${this.CELLS_IN_ROW}, calc((${100-2*this.PADDING_OF_MAIN_BLOCK_VW}vw - ${this.COMMON_GRID_GAP_PX}px)/${this.CELLS_IN_ROW})`,this.counter=1,this.block.style.setProperty("--grid-gap-px",`${this.GRID_GAP_PIXELS}px`),this.block.style.setProperty("--prop-of-grid",this.PROP_OF_GRID),this.block.style.setProperty("--cells-in-row",this.CELLS_IN_ROW)}increaseProgress(){this.PROGRESS_BAR_WIDTH=parseInt(this.PROGRESS_BAR_WIDTH)+25+"%",this.progressBarInner.style.setProperty("--progress-bar-width",this.PROGRESS_BAR_WIDTH)}}(2,5,5);i.createBlock(),s.insertAdjacentElement("afterbegin",i.mainBlock),i.createRandomArr(),i.createCellsArr();for(let e of i.cellsArr)i.block.insertAdjacentElement("afterbegin",e);s.querySelector(".patience__table").addEventListener("click",(s=>{if(s.target.classList.contains("patience__cell"))if(s.target.textContent==i.counter){s.target.classList.add("patience__cell_active"),i.increaseCounter(),i.counter==Math.pow(i.CELLS_IN_ROW,2)+1?(i.increaseCellsInRow(),i.refreshState(),i.increaseProgress(),r.play()):e.play(),i.cleanCells(),i.createRandomArr(),i.createCellsArr(),i.preservingThePast();for(let e of i.cellsArr)i.block.insertAdjacentElement("afterbegin",e)}else{i.resetCounter(),i.cleanCells(),i.createRandomArr(),i.createCellsArr();for(let e of i.cellsArr)i.block.insertAdjacentElement("afterbegin",e);t.play()}}))})();